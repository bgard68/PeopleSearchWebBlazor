@page "/DatabaseSetup"

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h2 class="mb-0">Database Setup Guide</h2>
                </div>
                <div class="card-body">
                    <section class="mb-4">
                        <h4>Prerequisites</h4>
                        <ul>
                            <li>.NET 8 SDK installed</li>
                            <li>Access to the solution source code</li>
                            <li>Database permissions as specified in <code>appsettings.json</code></li>
                        </ul>
                    </section>
                    <section class="mb-4">
                        <h4>Step-by-Step Instructions</h4>
                        <ol>
                            <li>
                                <strong>Restore NuGet Packages</strong><br />
                                <span class="text-muted">Directory: Solution root</span><br />
                                <code>dotnet restore</code>
                            </li>
                            <li>
                                <strong>Build the Solution</strong><br />
                                <span class="text-muted">Directory: Solution root</span><br />
                                <code>dotnet build</code>
                            </li>
                            <li>
                                <strong>Apply Migrations to Create/Update the Database</strong><br />
                                <span class="text-muted">Directory: Solution root</span><br />
                                <code>dotnet ef database update --project Infrastructure/Infrastructure.csproj --startup-project PeopleSearch/PeopleSearch.csproj</code>
                                <div class="small text-muted">Creates the database (if it does not exist) and applies all migrations.</div>
                            </li>
                            <li>
                                <strong>(Optional) Add a Migration if Models Have Changed</strong><br />
                                <span class="text-muted">Directory: Solution root</span><br />
                                <code>dotnet ef migrations add MigrationName --project Infrastructure/Infrastructure.csproj --startup-project PeopleSearch/PeopleSearch.csproj</code>
                                <div class="small text-muted">Replace <code>MigrationName</code> with a descriptive name for your migration.</div>
                            </li>
                            <li>
                                <strong>Verify the Database</strong><br />
                                <span class="text-muted">Use a database tool</span><br />
                                <div class="small text-muted">Use SQL Server Management Studio, Azure Data Studio, or another tool to connect to the database specified in <code>appsettings.json</code> and verify tables and seed data.</div>
                            </li>
                        </ol>
                    </section>
                    <section class="mb-4">
                        <h4>Summary Table</h4>
                        <div class="table-responsive">
                            <table class="table table-bordered table-sm">
                                <thead class="table-light">
                                    <tr>
                                        <th>Step</th>
                                        <th>Directory</th>
                                        <th>Command/Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Restore packages</td>
                                        <td>Solution root</td>
                                        <td><code>dotnet restore</code></td>
                                    </tr>
                                    <tr>
                                        <td>Build solution</td>
                                        <td>Solution root</td>
                                        <td><code>dotnet build</code></td>
                                    </tr>
                                    <tr>
                                        <td>Apply migrations</td>
                                        <td>Solution root</td>
                                        <td><code>dotnet ef database update --project Infrastructure/Infrastructure.csproj --startup-project PeopleSearch/PeopleSearch.csproj</code></td>
                                    </tr>
                                    <tr>
                                        <td>Add migration (opt)</td>
                                        <td>Solution root</td>
                                        <td><code>dotnet ef migrations add MigrationName --project Infrastructure/Infrastructure.csproj --startup-project PeopleSearch/PeopleSearch.csproj</code></td>
                                    </tr>
                                    <tr>
                                        <td>Verify DB</td>
                                        <td>N/A</td>
                                        <td>Use a database tool</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>

                </div>

            </div>
        </div>
    </div>
</div>